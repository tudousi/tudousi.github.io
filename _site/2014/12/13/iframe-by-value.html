<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>页面中多 iframe 传值</title>
   <meta name="author" content="tudousi" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
</head>
<body>


<div class="site">
  <div class="title">
    <a class="extra" href="/">HOME</a>
    <a class="" href="/javascript.html">JAVASCRIPT</a>
    <a class="" href="/htmlcss.html">HTML/CSS</a>
    <a class="" href="/tools.html">开发工具</a>
    <a class="" href="/plugin.html">JS/JQ插件</a>
  </div>
  
  <div id="post">
<h1>页面中多 iframe 传值</h1>
<div class="copyright">
	作者: 蒋著 | 可以转载, 但必须以超链接形式标明文章原始出处和作者信息及版权声明<br />
	网址: http://createthink.net/2014/12/13/iframe-by-value.html
	</div>
<h3>关于 iframe 传值</h3>

<blockquote><p>如果一个页面中有多个 iframe 如何做到互相调用函数和传值。js 默认自带 只能子页面调用和修改父页面的函数或变量。没有 iframe 之间的调用，那么就要想一些办法</p></blockquote>

<h4>办法1：</h4>

<p>当 iframe 页面加载的时候在 window 保存在父页面的变量中</p>

<p>父页面：</p>

<pre><code class="javascript">var iframeObj = {};
</code></pre>

<p>子页面（iframe）</p>

<pre><code class="javascript">window.onload = function(){
    top.window.iframeObj['iframe1'] = window;
};
</code></pre>

<p>如果我们要在一个 iframe 中调用另外一个 iframe 的时候可以这样做</p>

<pre><code class="javascript">var iframe2 = top.window.iframeObj['iframe2'];
iframe2.info();
</code></pre>

<h4>实例</h4>

<iframe  frameborder="0" scrolling="no" src="/resource/iframebyvalue/demo1.html" width="600" height="200"></iframe>


<p><br></p>

<h4>方法2</h4>

<p>在子页面（iframe）里面监听 hash 的改变，通过 hash 来达到传值的目的</p>

<p>子页面（iframe）</p>

<pre><code class="javascript">var hash = location.hash;
window.onload = function(){
    setInterval(function(){
        var tmpHash = location.hash;
        if(hash != tmpHash &amp;&amp; tmpHash != ''){
            hash = tmpHash;
            var call = hash.slice(1, hash.length);
            try{
                eval(call+"()");
            }catch(e){

            }
        }
    }, 100);
};
function callInfo(){
    var iframe4 = top.window.document
    iframe4 = iframe4.getElementById('iframe4')['contentDocument'];
    iframe4.location.hash = '#callInfoRun';
}
function callInfoRun(){
    alert('我是页面 3 的 callInfo 方法');
}
</code></pre>

<h4>实例</h4>

<iframe  frameborder="0" scrolling="no" src="/resource/iframebyvalue/demo2.html" width="600" height="200"></iframe>


<p>ps: 感觉第二种实用性不是太高，有一个 100 毫秒的定时器，耗性能。</p>

<p> 测试代码下载 <a href="/resource/iframebyvalue/iframe.zip">点击下载</a></p>

<ul>
<li>如果你还有其他的方法请加 QQ 群讨论吧 239147101</li>
</ul>


</div>

<div id="related">
  <h2>最近文章</h2>
  <ul class="posts">
    
      <li><span>26 Dec 2014</span> &raquo; <a href="/2014/12/26/svn-command.html">SVN 命令介绍</a></li>
    
      <li><span>13 Dec 2014</span> &raquo; <a href="/2014/12/13/connect-using-the-analytical.html">Connect 中间件使用解析</a></li>
    
      <li><span>23 Nov 2014</span> &raquo; <a href="/2014/11/23/Brackets-10-common-plug-ins.html">Brackets 10款常用插件</a></li>
    
  </ul>
</div>
  
  <div class="footer"></div>
<div class="power">  
  Powered by <a href="http://github.com/" targe="_blank">Github</a> &nbsp;&amp;&amp;&nbsp; <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> 
</div>
</div>

<a href="https://github.com/tudousi"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

<!-- Google Analytics end -->

</body>
</html>
